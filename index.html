<!DOCTYPE html>
<html lang="en">
<head>
  <title>AI Bybit Trading</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #10101a;
      overflow-x: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    /* Animated AI background */
    .ai-bg {
      position: fixed;
      top: 0; left: 0; width: 100vw; height: 100vh;
      z-index: 0;
      pointer-events: none;
      background: radial-gradient(ellipse at 60% 40%, #00f2fe33 0%, #10101a 70%);
      overflow: hidden;
    }
    .ai-bg::before, .ai-bg::after {
      content: '';
      position: absolute;
      border-radius: 50%;
      filter: blur(40px);
      opacity: 0.5;
      animation: move 8s infinite alternate;
    }
    .ai-bg::before {
      width: 240px; height: 240px;
      left: 10vw; top: 10vh;
      background: #00f2fe;
      animation-delay: 0s;
    }
    .ai-bg::after {
      width: 180px; height: 180px;
      right: 10vw; bottom: 10vh;
      background: #4facfe;
      animation-delay: 2s;
    }
    @keyframes move {
      0% { transform: translateY(0) scale(1);}
      100% { transform: translateY(30px) scale(1.1);}
    }

    .panel {
      position: relative;
      z-index: 1;
      width: 100%;
      max-width: 340px;
      background: rgba(20, 24, 40, 0.95);
      border: 1.5px solid #222a;
      border-radius: 18px;
      box-shadow: 0 8px 32px rgba(0, 242, 254, 0.08), 0 2px 8px #0008;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding: 24px 16px 18px 16px;
      margin: 0 auto;
      overflow: hidden;
    }
    h2 {
      text-align: center;
      color: #fff;
      font-size: 1.3em;
      margin-bottom: 18px;
      font-weight: 700;
      letter-spacing: 1px;
      text-shadow: 0 2px 8px #00f2fe22;
    }
    .ai-label {
      display: block;
      text-align: center;
      color: #00f2fe;
      font-size: 0.95em;
      letter-spacing: 1.5px;
      margin-bottom: 18px;
      font-weight: 600;
      text-shadow: 0 2px 8px #00f2fe44;
      animation: glow 2s infinite alternate;
    }
    @keyframes glow {
      from { text-shadow: 0 0 8px #00f2fe88; }
      to   { text-shadow: 0 0 24px #00f2fecc; }
    }
    .form-group {
      display: flex;
      flex-direction: column;
      margin-bottom: 14px;
    }
    label {
      font-size: 0.97em;
      color: #b8eaff;
      margin-bottom: 5px;
      font-weight: 500;
      letter-spacing: 0.5px;
    }
    input, select {
      padding: 9px 12px;
      border-radius: 8px;
      border: 1.2px solid #222a;
      background: rgba(255,255,255,0.07);
      color: #fff;
      font-size: 1em;
      transition: border 0.2s, background 0.2s;
      outline: none;
    }
    input:focus, select:focus {
      border: 1.5px solid #00f2fe;
      background: rgba(0,242,254,0.08);
    }
    button {
      width: 100%;
      padding: 13px 0;
      border: none;
      border-radius: 10px;
      background: linear-gradient(90deg, #00f2fe 0%, #4facfe 100%);
      color: white;
      font-size: 1.07em;
      font-weight: 600;
      margin-top: 10px;
      cursor: pointer;
      box-shadow: 0 4px 18px #00f2fe33;
      transition: transform 0.13s, box-shadow 0.13s;
      position: relative;
      overflow: hidden;
      letter-spacing: 1px;
    }
    button:active {
      transform: scale(0.97);
      box-shadow: 0 2px 8px #00f2fe66;
    }
    .status {
      margin-top: 14px;
      text-align: center;
      color: #fff;
      font-size: 0.98em;
      min-height: 22px;
      word-break: break-word;
      text-shadow: 0 1px 2px #0006;
    }
    @media (max-width: 420px) {
      .panel {
        padding: 14px 2vw;
        border-radius: 14px;
      }
      h2 { font-size: 1.1em; }
      input, select { font-size: 0.97em; }
      button { font-size: 1em; }
    }
  </style>
</head>
<body>
  <div class="ai-bg"></div>
  <div class="panel">
    <h2>AI Bybit Trading</h2>
    <span class="ai-label">AI-Powered Trading Panel</span>

    <div class="form-group">
      <label for="symbol">Symbol</label>
      <input id="symbol" placeholder="e.g. BTCUSDT" value="BTCUSDT" />
    </div>

    <div class="form-group">
      <label for="side">Side</label>
      <select id="side">
        <option value="Buy">Buy</option>
        <option value="Sell">Sell</option>
      </select>
    </div>

    <div class="form-group">
      <label for="orderType">Order Type</label>
      <select id="orderType" onchange="togglePriceInput()">
        <option value="Market">Market</option>
        <option value="Limit">Limit</option>
      </select>
    </div>

    <div class="form-group">
      <label for="qty">Quantity</label>
      <input id="qty" type="number" placeholder="Amount" step="0.001" />
    </div>

    <div class="form-group" id="priceRow" style="display:none;">
      <label for="price">Limit Price</label>
      <input id="price" type="number" placeholder="Limit price" step="0.01" />
    </div>

    <button onclick="placeOrder()">Place Order</button>
    <button onclick="getPrice()">Get Price</button>

    <div class="status" id="status"></div>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.ready();

    function togglePriceInput() {
      const type = document.getElementById("orderType").value;
      document.getElementById("priceRow").style.display = type === "Limit" ? "block" : "none";
    }

    function showStatus(message, isError = false) {
      const status = document.getElementById("status");
      status.innerHTML = `<span style="color:${isError ? '#ff4e4e' : '#00f2fe'}">${message}</span>`;
    }

    function placeOrder() {
      const symbol = document.getElementById("symbol").value.trim().toUpperCase();
      const side = document.getElementById("side").value;
      const qty = document.getElementById("qty").value;
      const type = document.getElementById("orderType").value;
      const price = document.getElementById("price").value;

      if (!symbol.match(/^[A-Z0-9]{3,15}$/)) return showStatus("Invalid symbol.", true);
      if (!qty || Number(qty) <= 0) return showStatus("Enter a valid quantity.", true);
      if (type === "Limit" && (!price || Number(price) <= 0)) return showStatus("Enter a valid price.", true);

      tg.sendData(JSON.stringify({
        action: "placeOrder",
        symbol,
        side,
        qty,
        orderType: type,
        price: type === "Limit" ? price : undefined
      }));

      showStatus("Order sent to bot...");
    }

    function getPrice() {
      const symbol = document.getElementById("symbol").value.trim().toUpperCase();
      if (!symbol.match(/^[A-Z0-9]{3,15}$/)) return showStatus("Invalid symbol.", true);

      tg.sendData(JSON.stringify({
        action: "getPrice",
        symbol
      }));

      showStatus("Requesting price...");
    }
  </script>
</body>
</html>
